{"ast":null,"code":"import Logger from './logger';\nlet urlStore = [];\nlet clickStore = {};\nfunction generateShortcode() {\n  const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  let code;\n  do {\n    code = Array.from({\n      length: 6\n    }, () => chars[Math.floor(Math.random() * chars.length)]).join('');\n  } while (urlStore.some(u => u.shortcode === code));\n  return code;\n}\nexport async function createShortUrls(urlInputs) {\n  // urlInputs: [{url, duration, shortcode}]\n  const now = new Date();\n  const results = [];\n  for (const input of urlInputs) {\n    let {\n      url,\n      duration,\n      shortcode\n    } = input;\n    if (!shortcode) {\n      shortcode = generateShortcode();\n    }\n    if (urlStore.some(u => u.shortcode === shortcode)) {\n      Logger.warn('Shortcode already exists', {\n        shortcode\n      });\n      throw new Error(`Shortcode \"${shortcode}\" already exists.`);\n    }\n    // Ensure duration is a number\n    duration = Number(duration) || 30;\n    const expiry = new Date(now.getTime() + duration * 60000);\n    const entry = {\n      id: urlStore.length + 1,\n      url,\n      shortcode,\n      createdAt: now.toISOString(),\n      expiresAt: expiry.toISOString(),\n      clicks: 0\n    };\n    urlStore.push(entry);\n    clickStore[shortcode] = [];\n    Logger.info('Short URL created', {\n      shortcode,\n      url\n    });\n    results.push(entry);\n  }\n  return results;\n}\nexport async function getAllShortUrls() {\n  // Return a shallow copy to prevent external mutation\n  return [...urlStore];\n}\nexport async function getStats(shortcode) {\n  const urlEntry = urlStore.find(u => u.shortcode === shortcode);\n  if (!urlEntry) throw new Error('Shortcode not found');\n  // Return a shallow copy for safety\n  return {\n    ...urlEntry,\n    clickDetails: clickStore[shortcode] ? [...clickStore[shortcode]] : []\n  };\n}\n\n// For demo: simulate a click\nexport function simulateClick(shortcode, referrer = '', geo = 'Unknown') {\n  if (!clickStore[shortcode]) return;\n  clickStore[shortcode].push({\n    timestamp: new Date().toISOString(),\n    referrer,\n    geo\n  });\n  const urlEntry = urlStore.find(u => u.shortcode === shortcode);\n  if (urlEntry) urlEntry.clicks += 1;\n}","map":{"version":3,"names":["Logger","urlStore","clickStore","generateShortcode","chars","code","Array","from","length","Math","floor","random","join","some","u","shortcode","createShortUrls","urlInputs","now","Date","results","input","url","duration","warn","Error","Number","expiry","getTime","entry","id","createdAt","toISOString","expiresAt","clicks","push","info","getAllShortUrls","getStats","urlEntry","find","clickDetails","simulateClick","referrer","geo","timestamp"],"sources":["D:/New folder/src/services/api.js"],"sourcesContent":["import Logger from './logger';\r\n\r\nlet urlStore = [];\r\nlet clickStore = {};\r\n\r\nfunction generateShortcode() {\r\n  const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n  let code;\r\n  do {\r\n    code = Array.from({length: 6}, () => chars[Math.floor(Math.random() * chars.length)]).join('');\r\n  } while (urlStore.some(u => u.shortcode === code));\r\n  return code;\r\n}\r\n\r\nexport async function createShortUrls(urlInputs) {\r\n  // urlInputs: [{url, duration, shortcode}]\r\n  const now = new Date();\r\n  const results = [];\r\n  for (const input of urlInputs) {\r\n    let { url, duration, shortcode } = input;\r\n    if (!shortcode) {\r\n      shortcode = generateShortcode();\r\n    }\r\n    if (urlStore.some(u => u.shortcode === shortcode)) {\r\n      Logger.warn('Shortcode already exists', { shortcode });\r\n      throw new Error(`Shortcode \"${shortcode}\" already exists.`);\r\n    }\r\n    // Ensure duration is a number\r\n    duration = Number(duration) || 30;\r\n    const expiry = new Date(now.getTime() + duration * 60000);\r\n    const entry = {\r\n      id: urlStore.length + 1,\r\n      url,\r\n      shortcode,\r\n      createdAt: now.toISOString(),\r\n      expiresAt: expiry.toISOString(),\r\n      clicks: 0,\r\n    };\r\n    urlStore.push(entry);\r\n    clickStore[shortcode] = [];\r\n    Logger.info('Short URL created', { shortcode, url });\r\n    results.push(entry);\r\n  }\r\n  return results;\r\n}\r\n\r\nexport async function getAllShortUrls() {\r\n  // Return a shallow copy to prevent external mutation\r\n  return [...urlStore];\r\n}\r\n\r\nexport async function getStats(shortcode) {\r\n  const urlEntry = urlStore.find(u => u.shortcode === shortcode);\r\n  if (!urlEntry) throw new Error('Shortcode not found');\r\n  // Return a shallow copy for safety\r\n  return {\r\n    ...urlEntry,\r\n    clickDetails: clickStore[shortcode] ? [...clickStore[shortcode]] : [],\r\n  };\r\n}\r\n\r\n// For demo: simulate a click\r\nexport function simulateClick(shortcode, referrer = '', geo = 'Unknown') {\r\n  if (!clickStore[shortcode]) return;\r\n  clickStore[shortcode].push({\r\n    timestamp: new Date().toISOString(),\r\n    referrer,\r\n    geo,\r\n  });\r\n  const urlEntry = urlStore.find(u => u.shortcode === shortcode);\r\n  if (urlEntry) urlEntry.clicks += 1;\r\n}\r\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,UAAU;AAE7B,IAAIC,QAAQ,GAAG,EAAE;AACjB,IAAIC,UAAU,GAAG,CAAC,CAAC;AAEnB,SAASC,iBAAiBA,CAAA,EAAG;EAC3B,MAAMC,KAAK,GAAG,gEAAgE;EAC9E,IAAIC,IAAI;EACR,GAAG;IACDA,IAAI,GAAGC,KAAK,CAACC,IAAI,CAAC;MAACC,MAAM,EAAE;IAAC,CAAC,EAAE,MAAMJ,KAAK,CAACK,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGP,KAAK,CAACI,MAAM,CAAC,CAAC,CAAC,CAACI,IAAI,CAAC,EAAE,CAAC;EAChG,CAAC,QAAQX,QAAQ,CAACY,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKV,IAAI,CAAC;EACjD,OAAOA,IAAI;AACb;AAEA,OAAO,eAAeW,eAAeA,CAACC,SAAS,EAAE;EAC/C;EACA,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB,MAAMC,OAAO,GAAG,EAAE;EAClB,KAAK,MAAMC,KAAK,IAAIJ,SAAS,EAAE;IAC7B,IAAI;MAAEK,GAAG;MAAEC,QAAQ;MAAER;IAAU,CAAC,GAAGM,KAAK;IACxC,IAAI,CAACN,SAAS,EAAE;MACdA,SAAS,GAAGZ,iBAAiB,CAAC,CAAC;IACjC;IACA,IAAIF,QAAQ,CAACY,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKA,SAAS,CAAC,EAAE;MACjDf,MAAM,CAACwB,IAAI,CAAC,0BAA0B,EAAE;QAAET;MAAU,CAAC,CAAC;MACtD,MAAM,IAAIU,KAAK,CAAC,cAAcV,SAAS,mBAAmB,CAAC;IAC7D;IACA;IACAQ,QAAQ,GAAGG,MAAM,CAACH,QAAQ,CAAC,IAAI,EAAE;IACjC,MAAMI,MAAM,GAAG,IAAIR,IAAI,CAACD,GAAG,CAACU,OAAO,CAAC,CAAC,GAAGL,QAAQ,GAAG,KAAK,CAAC;IACzD,MAAMM,KAAK,GAAG;MACZC,EAAE,EAAE7B,QAAQ,CAACO,MAAM,GAAG,CAAC;MACvBc,GAAG;MACHP,SAAS;MACTgB,SAAS,EAAEb,GAAG,CAACc,WAAW,CAAC,CAAC;MAC5BC,SAAS,EAAEN,MAAM,CAACK,WAAW,CAAC,CAAC;MAC/BE,MAAM,EAAE;IACV,CAAC;IACDjC,QAAQ,CAACkC,IAAI,CAACN,KAAK,CAAC;IACpB3B,UAAU,CAACa,SAAS,CAAC,GAAG,EAAE;IAC1Bf,MAAM,CAACoC,IAAI,CAAC,mBAAmB,EAAE;MAAErB,SAAS;MAAEO;IAAI,CAAC,CAAC;IACpDF,OAAO,CAACe,IAAI,CAACN,KAAK,CAAC;EACrB;EACA,OAAOT,OAAO;AAChB;AAEA,OAAO,eAAeiB,eAAeA,CAAA,EAAG;EACtC;EACA,OAAO,CAAC,GAAGpC,QAAQ,CAAC;AACtB;AAEA,OAAO,eAAeqC,QAAQA,CAACvB,SAAS,EAAE;EACxC,MAAMwB,QAAQ,GAAGtC,QAAQ,CAACuC,IAAI,CAAC1B,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKA,SAAS,CAAC;EAC9D,IAAI,CAACwB,QAAQ,EAAE,MAAM,IAAId,KAAK,CAAC,qBAAqB,CAAC;EACrD;EACA,OAAO;IACL,GAAGc,QAAQ;IACXE,YAAY,EAAEvC,UAAU,CAACa,SAAS,CAAC,GAAG,CAAC,GAAGb,UAAU,CAACa,SAAS,CAAC,CAAC,GAAG;EACrE,CAAC;AACH;;AAEA;AACA,OAAO,SAAS2B,aAAaA,CAAC3B,SAAS,EAAE4B,QAAQ,GAAG,EAAE,EAAEC,GAAG,GAAG,SAAS,EAAE;EACvE,IAAI,CAAC1C,UAAU,CAACa,SAAS,CAAC,EAAE;EAC5Bb,UAAU,CAACa,SAAS,CAAC,CAACoB,IAAI,CAAC;IACzBU,SAAS,EAAE,IAAI1B,IAAI,CAAC,CAAC,CAACa,WAAW,CAAC,CAAC;IACnCW,QAAQ;IACRC;EACF,CAAC,CAAC;EACF,MAAML,QAAQ,GAAGtC,QAAQ,CAACuC,IAAI,CAAC1B,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKA,SAAS,CAAC;EAC9D,IAAIwB,QAAQ,EAAEA,QAAQ,CAACL,MAAM,IAAI,CAAC;AACpC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}